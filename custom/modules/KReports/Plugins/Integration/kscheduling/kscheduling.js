Ext.namespace('K.kreports.schedulingpanel');Ext.define('K.kreports.schedulingpanel.model',{extend:'Ext.data.Model',fields:[{name:'schedulerid',mapping:'schedulerid'},{name:'scheduleraction',mapping:'scheduleraction'},{name:'schedulersendto',mapping:'schedulersendto'},{name:'min',mapping:'min'},{name:'hrs',mapping:'hrs'},{name:'day',mapping:'day'},{name:'month',mapping:'month'},{name:'weekday',mapping:'weekday'}]});K.kreports.schedulingpanel.store=new Ext.data.Store({model:K.kreports.schedulingpanel.model,proxy:{type:'memory',reader:{type:'json'}}});K.kreports.schedulingpanel.thePanel=new Ext.grid.Panel({layout:{type:'anchor',defaultAnchor:'90%'},pluginid:'kscheduling',viewConfig:{markDirty:false},plugins:[Ext.create('Ext.grid.plugin.CellEditing',{clicksToEdit:1})],store:K.kreports.schedulingpanel.store,columns:[{text:'min',dataIndex:'min',editor:new Ext.form.field.Text(),width:80},{text:'hrs',dataIndex:'hrs',editor:new Ext.form.field.Text(),width:80},{text:'day',dataIndex:'day',editor:new Ext.form.field.Text(),width:80},{text:'month',dataIndex:'month',editor:new Ext.form.field.Text(),width:80},{text:'weekday',dataIndex:'weekday',editor:new Ext.form.field.Text(),width:80},{text:'scheduleraction',dataIndex:'scheduleraction',renderer:function(value){if(value!='')return bi('LBL_'+value+'_EXPORT');else return value;},editor:new Ext.form.field.ComboBox({typeAhead:false,editable:false,triggerAction:'all',forceSelection:true,width:100,lazyRender:true,value:'EXCEL',mode:'local',store:new Ext.data.ArrayStore({id:0,fields:['value','text'],data:[['TARGETLIST',bi('LBL_TARGETLIST_EXPORT')],['EXCEL',bi('LBL_EXCEL_EXPORT')],['PDF',bi('LBL_PDF_EXPORT')],['CSV',bi('LBL_CSV_EXPORT')],['SNAPSHOT',bi('LBL_SNAPSHOT_EXPORT')]]}),valueField:'value',displayField:'text'}),width:150},{text:'schedulersendto',dataIndex:'schedulersendto',editor:new Ext.form.field.Text(),width:200}],tbar:[{xtype:'button',text:'add',icon:'modules/KReports/images/add.png',handler:function(){K.kreports.schedulingpanel.store.add({schedulerid:kGuid(),day:'*',month:'*',weekday:'*',hrs:'*',min:'*',scheduleraction:'EXCEL'});}},{xtype:'button',text:'delete',icon:'modules/KReports/images/delete.png',handler:function(){K.kreports.schedulingpanel.store.remove(K.kreports.schedulingpanel.thePanel.getSelectionModel().getSelection());}}],setPanelData:function(pluginParams){K.kreports.schedulingpanel.store.removeAll();for(var i=0;i<pluginParams.length;i++)K.kreports.schedulingpanel.store.add(pluginParams[i]);},getPanelData:function(){var schedulerArray=new Array();for(var i=0;i<K.kreports.schedulingpanel.store.count();i++)schedulerArray.push(K.kreports.schedulingpanel.store.data.items[i].data);return schedulerArray;}})
Ext.namespace('K.kreports.treeview');Ext.define('K.kreports.treeview.aD',{extend:'Ext.data.Model',fields:FieldsArray});K.kreports.treeview.store=new Ext.data.TreeStore({model:K.kreports.treeview.aD,whereConditions:null,proxy:{type:'ajax',actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},url:'index.php?module=KReports&action=pluginaction&plugin=tree&pluginaction=load_report_tree&to_pdf=true',reader:{type:'json',id:'id'},extraParams:{requester:document.getElementById('recordid').value}},root:{text:'primary',id:'root'}});K.kreports.treeview.grid=new Ext.tree.Panel({id:'kReporterPresentation',store:K.kreports.treeview.store,rootVisible:false,columns:ColumnsArray,monitorResize:true,autoHeight:true,minHeight:400,boxMinHeight:250,renderPresentation:function(){this.render('reportGrid');var position=this.getPosition();this.setHeight(Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight))-100-position[1]);K.kreports.treeview.store.getRootNode().expand();},reloadPresentation:function(whereConditions){K.kreports.treeview.store.getRootNode().removeAll();K.kreports.treeview.store.getProxy().extraParams.whereConditions=whereConditions;K.kreports.treeview.store.load();},bS:function(){bk=new Array();for(i=0;i<K.kreports.treeview.grid.columns.length;i++){bk[i]=new Object();bk[i].sequence=i+1;bk[i].dataIndex=K.kreports.treeview.grid.columns[i].dataIndex;bk[i].width=K.kreports.treeview.grid.columns[i].getWidth();bk[i].isHidden=K.kreports.treeview.grid.columns[i].isHidden();}return bk;},tools:[{type:'save',handler:function(){Ext.Ajax.request({url:'index.php?module=KReports&to_pdf=true&action=pluginaction&plugin=tree&pluginaction=save_tree_layout',params:{record:document.getElementById('recordid').value,layoutparams:Ext.JSON.encode(K.kreports.treeview.grid.bS())},success:function(){}});}}],title:bi('LBL_STANDARDGRIDPANELTITLE'),collapsible:true,listeners:{'viewready':function(){this.setHeight();}}});